{"version":3,"file":"breadcrumb.js","sources":["../../src/helpers/breadcrumb.ts"],"sourcesContent":["import Helper from '@ember/component/helper';\nimport { service } from '@ember/service';\nimport type { BreadcrumbData } from '../private-types.ts';\nimport type BreadcrumbsService from '../services/breadcrumbs.ts';\n\ntype TitleParts = [title: string];\ntype OptionalData = Record<string, unknown>;\n\nexport interface BreadcrumbHelperSignature {\n  Args: {\n    Positional: TitleParts;\n    Named: OptionalData;\n  };\n  Return: void;\n}\n\nexport default class BreadcrumbHelper extends Helper<BreadcrumbHelperSignature> {\n  @service('breadcrumbs') declare breadcrumbsService: BreadcrumbsService;\n\n  breadcrumbId: string | null = null;\n\n  get breadcrumbWasAddedBefore() {\n    return !!this.breadcrumbId;\n  }\n\n  compute(breadcrumbTitleParts: TitleParts, optionalData: OptionalData) {\n    const breadcrumbTitle = breadcrumbTitleParts.join('');\n\n    const breadcrumbData: BreadcrumbData = {\n      data: optionalData,\n      title: breadcrumbTitle,\n    };\n\n    if (this.breadcrumbWasAddedBefore) {\n      this.breadcrumbsService.updateBreadcrumb(\n        this.breadcrumbId!,\n        breadcrumbData,\n      );\n    } else {\n      this.breadcrumbId = this.breadcrumbsService.addBreadcrumb(breadcrumbData);\n    }\n  }\n\n  willDestroy() {\n    super.willDestroy();\n\n    if (this.breadcrumbWasAddedBefore) {\n      this.breadcrumbsService.removeBreadcrumb(this.breadcrumbId!);\n    }\n  }\n}\n"],"names":["BreadcrumbHelper","Helper","g","this","prototype","service","i","void 0","breadcrumbId","breadcrumbWasAddedBefore","compute","breadcrumbTitleParts","optionalData","breadcrumbTitle","join","breadcrumbData","data","title","breadcrumbsService","updateBreadcrumb","addBreadcrumb","willDestroy","removeBreadcrumb"],"mappings":";;;;AAgBe,MAAMA,gBAAgB,SAASC,MAAM,CAA4B;AAAA,EAAA;IAAAC,CAAA,CAAAC,IAAA,CAAAC,SAAA,yBAC7EC,OAAO,CAAC,aAAa,CAAC,CAAA,CAAA,CAAA;AAAA,GAAA;AAAA,EAAA,mBAAA,IAAAC,CAAA,CAAAH,IAAA,yBAAAI,KAAA,CAAA,EAAA;AAEvBC,EAAAA,YAAY,GAAkB,IAAI,CAAA;EAElC,IAAIC,wBAAwBA,GAAG;AAC7B,IAAA,OAAO,CAAC,CAAC,IAAI,CAACD,YAAY,CAAA;AAC5B,GAAA;AAEAE,EAAAA,OAAOA,CAACC,oBAAgC,EAAEC,YAA0B,EAAE;AACpE,IAAA,MAAMC,eAAe,GAAGF,oBAAoB,CAACG,IAAI,CAAC,EAAE,CAAC,CAAA;AAErD,IAAA,MAAMC,cAA8B,GAAG;AACrCC,MAAAA,IAAI,EAAEJ,YAAY;AAClBK,MAAAA,KAAK,EAAEJ,eAAAA;KACR,CAAA;IAED,IAAI,IAAI,CAACJ,wBAAwB,EAAE;MACjC,IAAI,CAACS,kBAAkB,CAACC,gBAAgB,CACtC,IAAI,CAACX,YAAY,EACjBO,cACF,CAAC,CAAA;AACH,KAAC,MAAM;MACL,IAAI,CAACP,YAAY,GAAG,IAAI,CAACU,kBAAkB,CAACE,aAAa,CAACL,cAAc,CAAC,CAAA;AAC3E,KAAA;AACF,GAAA;AAEAM,EAAAA,WAAWA,GAAG;IACZ,KAAK,CAACA,WAAW,EAAE,CAAA;IAEnB,IAAI,IAAI,CAACZ,wBAAwB,EAAE;MACjC,IAAI,CAACS,kBAAkB,CAACI,gBAAgB,CAAC,IAAI,CAACd,YAAa,CAAC,CAAA;AAC9D,KAAA;AACF,GAAA;AACF;;;;"}